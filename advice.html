<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ™ºèƒ½å»ºè®® - å¥èº«ç®¡ç†APP</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ç§»åŠ¨ç«¯é€‚é…æ ·å¼ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            color: #333;
        }
        
        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 80px; /* ä¸ºåº•éƒ¨å¯¼èˆªæ é¢„ç•™ç©ºé—´ */
            background-color: #fff;
            min-height: 100vh;
            box-sizing: border-box;
        }
        
        h1 {
            text-align: center;
            color: #2196F3;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        /* å»ºè®®æ¨¡å—æ ·å¼ */
        .advice-module {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .advice-module h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
        }
        
        .advice-module h2 i {
            margin-right: 8px;
            font-size: 20px;
        }
        
        /* é¥®é£Ÿå»ºè®®æ ·å¼ */
        #dietAdvice h2 {
            color: #4CAF50;
        }
        
        /* è¿åŠ¨å»ºè®®æ ·å¼ */
        #exerciseAdvice h2 {
            color: #FF9800;
        }
        

        

        
        .scheme-content ul {
            padding-left: 20px;
            margin: 0;
        }
        
        .scheme-content li {
            margin-bottom: 8px;
            line-height: 1.6;
            color: #555;
        }
        
        /* å¡ç‰‡é€šç”¨æ ·å¼ */
        .info-card {
            background-color: #F8F9FA;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        /* æ ¸å¿ƒæ•°æ®æ ·å¼ */
        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .data-row:last-child {
            margin-bottom: 0;
        }
        
        .data-label {
            font-size: 14px;
            color: #333;
            font-weight: normal;
            flex: 1;
            text-align: left;
        }
        
        .data-value {
            font-size: 15px;
            font-weight: bold;
            color: #2196F3;
            text-align: center;
            flex: 1;
        }
        
        .data-value.deficit {
            color: #FF9800;
        }
        
        .data-unit {
            font-size: 12px;
            color: #666;
            text-align: right;
            flex: 1;
        }
        
        /* é£Ÿç‰©è¥å…»æ•°æ®æ ·å¼ */
        .food-nutrition {
            font-size: 12px;
            color: #6c757d;
            margin-left: 8px;
        }
        
        /* è¥å…»ç´ æ ·å¼ */
        .nutrient-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .nutrient-row:last-child {
            margin-bottom: 0;
        }
        
        .nutrient-label {
            font-size: 14px;
            color: #333;
            font-weight: normal;
            flex: 1;
            text-align: left;
        }
        
        .nutrient-value {
            font-size: 15px;
            font-weight: bold;
            color: #2196F3;
            text-align: center;
            flex: 1;
        }
        
        .nutrient-unit {
            font-size: 12px;
            color: #666;
            text-align: right;
            flex: 1;
        }
        
        /* é‡åŒ–è°ƒæ•´å»ºè®®æ ·å¼ - æç®€ç‰ˆ */
        .adjustment-advice {
            background-color: #fff;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 2px solid #2196F3;
        }
        
        .adjustment-advice h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .adjustment-advice ul {
            margin: 0;
            padding: 0;
        }
        
        .advice-item {
            background-color: #F8F9FA;
            border-radius: 6px;
            margin-bottom: 15px;
            border-left: 2px solid #2196F3;
        }
        
        .advice-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            cursor: pointer;
            font-weight: bold;
            background-color: #F8F9FA;
        }
        
        .advice-title .icon {
            transition: transform 0.3s ease;
            color: #666;
            font-size: 12px;
        }
        
        .advice-title.active .icon {
            transform: rotate(90deg);
        }
        
        .advice-content {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            margin: 0;
            padding: 0 10px;
            font-size: 14px;
            color: #555;
            line-height: 1.6;
            background-color: white;
            border-top: 1px solid #E9ECEF;
        }
        
        .advice-content.show {
            max-height: 200px; /* å›ºå®šè¶³å¤Ÿé«˜åº¦ï¼Œé¿å…é«˜åº¦è®¡ç®—é”™è¯¯ */
            opacity: 1;
            padding: 10px;
            margin: 0;
        }
        
        .advice-recommendation {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #dee2e6;
        }
        
        .advice-recommendation .food-name {
            font-weight: bold;
        }
        
        .advice-recommendation .food-nutrition {
            font-size: 12px;
            color: #666;
        }
        
        .data-value.need-to-add, .data-value.need-to-reduce {
            color: #FF9800;
        }
        
        /* è¿åŠ¨æ–¹æ¡ˆæ ·å¼ */
        .exercise-plan {
            background-color: #fff;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #FF9800;
        }
        
        .exercise-plan h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .exercise-plan ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .exercise-plan li {
            margin-bottom: 5px;
            color: #555;
        }
        
        /* å½“æ—¥è¿åŠ¨é€‚é…å»ºè®®æ ·å¼ */
        .today-exercise-advice {
            background-color: #fff;
            border-radius: 6px;
            padding: 15px;
            border-left: 4px solid #FFC107;
        }
        
        .today-exercise-advice h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #333;
        }
        
        /* å½“æ—¥è¿åŠ¨é€‚é…å»ºè®®å®¹å™¨æ ·å¼ */
        .daily-advice-container {
          width: 100%;
          margin: 10px 0;
          border-radius: 6px;
          border: 1px solid #f0f0f0;
        }
        .advice-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 10px 15px;
          background: #f8f9fa;
          cursor: pointer;
          border-radius: 6px 6px 0 0;
          transition: background 0.2s;
        }
        .advice-header:hover {
          background: #e8f4fd;
        }
        .advice-header .icon {
          font-size: 12px;
          transition: transform 0.3s;
        }
        .advice-header.active .icon {
          transform: rotate(90deg);
        }
        .advice-content {
          max-height: 0;
          opacity: 0;
          overflow: hidden;
          padding: 0 15px;
          transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        }
        .advice-header.active + .advice-content {
          max-height: 1000px;
          opacity: 1;
          padding: 15px;
          border-top: 1px solid #f0f0f0;
        }
        .advice-section {
          margin-bottom: 15px;
          line-height: 1.6;
        }
        .advice-section h4 {
          margin: 0 0 8px 0;
          color: #2196F3;
        }
        
        /* åº•éƒ¨å¯¼èˆªæ æ ·å¼ */
        .nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #fff;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
            max-width: 480px;
            margin: 0 auto;
        }
        
        .nav-btn {
            background: none;
            border: none;
            padding: 5px;
            cursor: pointer;
            text-align: center;
            color: #666;
        }
        
        .nav-btn i {
            font-size: 24px;
            display: block;
            margin-bottom: 3px;
        }
        
        .nav-btn span {
            font-size: 12px;
        }
        
        .nav-btn.active {
            color: #2196F3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ™ºèƒ½å»ºè®®</h1>
        
        <!-- é¥®é£Ÿå»ºè®®æ¨¡å— -->
        <div id="dietAdvice" class="advice-module">
            <h2><i>ğŸ½ï¸</i>é¥®é£Ÿå»ºè®®</h2>
            
            <!-- æ ¸å¿ƒæ•°æ®å¡ç‰‡ -->
            <div class="info-card">
                <div class="data-row">
                    <div class="data-label">TDEE</div>
                    <div class="data-value" id="tdeeValue">0</div>
                    <div class="data-unit">å¤§å¡</div>
                </div>
                <div class="data-row">
                    <div class="data-label">ä»Šæ—¥æ‘„å…¥</div>
                    <div class="data-value" id="todayIntakeValue">0</div>
                    <div class="data-unit">å¤§å¡</div>
                </div>
                <div class="data-row">
                    <div class="data-label">çƒ­é‡ç¼ºå£</div>
                    <div class="data-value deficit" id="calorieDeficitValue">0</div>
                    <div class="data-unit">å¤§å¡</div>
                </div>
            </div>
            
            <!-- ä¸‰å¤§è¥å…»ç´ å¡ç‰‡ -->
            <div class="info-card">
                <div class="nutrient-row">
                    <div class="nutrient-label">è›‹ç™½è´¨</div>
                    <div class="nutrient-value" id="proteinValue">0.0</div>
                    <div class="nutrient-unit">g</div>
                </div>
                <div class="nutrient-row">
                    <div class="nutrient-label">ç¢³æ°´åŒ–åˆç‰©</div>
                    <div class="nutrient-value" id="carbValue">0.0</div>
                    <div class="nutrient-unit">g</div>
                </div>
                <div class="nutrient-row">
                    <div class="nutrient-label">è„‚è‚ª</div>
                    <div class="nutrient-value" id="fatValue">0.0</div>
                    <div class="nutrient-unit">g</div>
                </div>
            </div>
            
            <!-- é‡åŒ–è°ƒæ•´å»ºè®® -->
            <div class="adjustment-advice">
                <h3>é‡åŒ–è°ƒæ•´å»ºè®®</h3>
                <ul id="adjustmentAdviceList">
                    <li>æš‚æ— è°ƒæ•´å»ºè®®</li>
                </ul>
            </div>
        </div>
        
        <!-- è¿åŠ¨å»ºè®®æ¨¡å— -->
        <div id="exerciseAdvice" class="advice-module">
            <h2><i>ğŸƒ</i>è¿åŠ¨å»ºè®®</h2>
            

            
            <!-- å½“æ—¥è¿åŠ¨é€‚é…å»ºè®® -->
            <div class="today-exercise-advice">
                <h3>å½“æ—¥è¿åŠ¨é€‚é…å»ºè®®</h3>
                <!-- å‡è„‚ç›®æ ‡å»ºè®® -->
                <div class="daily-advice-container">
                    <div class="advice-header" onclick="toggleAdvice('fat-loss')">
                        å‡è„‚ç›®æ ‡é€‚é…å»ºè®® <span class="icon">â–¶</span>
                    </div>
                    <div class="advice-content" id="fat-loss-content">
                        <div class="advice-section">
                            <!-- æ™ºèƒ½åˆ†ææ¨¡å— -->
                            <div class="smart-analysis">
                                <p><span class="score-label">ã€è¿åŠ¨æ­é…è¯„åˆ†ã€‘</span><span class="score-number">8/10</span></p>
                                <p>å½“æ—¥è¿åŠ¨ä¸ºã€Œè·³ç»³ï¼ˆæœ‰æ°§ï¼‰+ è…¹éƒ¨è®­ç»ƒï¼ˆæ— æ°§ï¼‰ã€ï¼Œæœ‰æ°§:æ— æ°§æ—¶é•¿æ¯”=1:1ï¼Œ<strong>è¯¥é…æ¯”å¥‘åˆå‡è„‚æœŸâ€œç‡ƒè„‚+ä¿è‚Œâ€éœ€æ±‚</strong>ï¼Œ<em class="gray-text">æ‰£åˆ†é¡¹ä¸ºéƒ¨ä½è¦†ç›–å•ä¸€ï¼ˆä»…æ ¸å¿ƒï¼‰</em>ã€‚</p>
                                
                                <p><span class="score-label">ã€æ—¶é•¿åˆç†æ€§ã€‘</span><span class="score-number">9/10</span></p>
                                <p>å•ç±»è¿åŠ¨æ—¶é•¿å‡ä¸º<span class="data-highlight">30åˆ†é’Ÿ</span>ï¼Œå¤„äº<strong>â€œæœ‰æ°§æœ‰æ•ˆåŒºé—´ï¼ˆ20-45åˆ†é’Ÿï¼‰+ æ— æ°§æœ‰æ•ˆåŒºé—´ï¼ˆ20-30åˆ†é’Ÿï¼‰â€</strong>ï¼Œ<em class="gray-text">æ— æ—¶é•¿è¿‡çŸ­/è¿‡é•¿é—®é¢˜</em>ã€‚</p>
                            </div>
                            
                            <h4 class="section-title">1. è¿åŠ¨å¼ºåº¦è°ƒæ•´</h4>
                            <p>â€¢ å½“æ—¥è¿åŠ¨æ€»æ¶ˆè€—ï¼š<span class="data-highlight"><span id="fat-loss-total-calorie">0</span>å¤§å¡</span> <span class="related-note">ï¼ˆç»“åˆã€æ—¶é•¿åˆç†æ€§ã€‘ï¼‰</span>ï¼Œè¯¥æ¶ˆè€—å¤„äºä¸­ç­‰åä¸Šæ°´å¹³</p>
                            <p>â€¢ è‹¥ä»Šæ—¥ç–²åŠ³ï¼šæ¬¡æ—¥æ›¿æ¢ä¸ºã€Œ<strong>å¿«èµ°40åˆ†é’Ÿ+ä¸Šè‚¢è½»æŠ—é˜»ï¼ˆå“‘é“ƒè‚©æ¨2ç»„Ã—15æ¬¡ï¼‰</strong>ã€ï¼Œæ€»æ¶ˆè€—æ§åˆ¶åœ¨<span class="data-highlight">350å¤§å¡</span>ï¼Œé¿å…ä»£è°¢ä¸‹é™</p>
                            <p>â€¢ è‹¥çŠ¶æ€è‰¯å¥½ï¼šä»Šæ—¥åŠ ç»ƒ<span class="data-highlight">10åˆ†é’Ÿ</span>é—´æ­‡è®­ç»ƒï¼ˆ<strong>å¼€åˆè·³30ç§’/æ³¢æ¯”è·³20ç§’ï¼Œç»„é—´ä¼‘æ¯20ç§’</strong>ï¼‰ï¼Œé¢å¤–æ¶ˆè€—<span class="data-highlight">100å¤§å¡</span>ï¼Œå»¶é•¿åç‡ƒæ•ˆåº”</p>
                        </div>
                        <div class="advice-section">
                            <h4>2. é¥®é£Ÿç²¾å‡†æ­é…</h4>
                            <p>â€¢ è®­ç»ƒå30åˆ†é’Ÿï¼š1ä¸ªé¸¡è›‹ï¼ˆ7gè›‹ç™½ï¼‰+åŠæ ¹é¦™è•‰ï¼ˆ20gç¢³æ°´ï¼‰ï¼Œè¡¥ç³–åŸé˜²è‚Œè‚‰æµå¤±</p>
                            <p>â€¢ æ™šé¤æ›¿æ¢ï¼š150gæ¸…è’¸é±¼ï¼ˆ25gè›‹ç™½ï¼‰+200gå‡‰æ‹Œè¥¿å…°èŠ±ï¼ˆ5gçº¤ç»´ï¼‰+50gç³™ç±³é¥­ï¼ˆ15gç¢³æ°´ï¼‰ï¼Œå¢åŠ é¥±è…¹æ„Ÿ</p>
                            <p>â€¢ çƒ­é‡æ§åˆ¶ï¼šå½“å‰ç¼ºå£<span id="fat-loss-calorie-gap">0</span>å¤§å¡ï¼Œå»ºè®®ä¿æŒåœ¨300-700å¤§å¡åŒºé—´ï¼Œé¿å…ä»£è°¢æŸä¼¤</p>
                        </div>
                        <div class="advice-section">
                            <h4>3. æ¢å¤ä¸æŠ€å·§</h4>
                            <p>â€¢ è‚Œè‚‰æ”¾æ¾ï¼šæ³¡æ²«è½´æ»šå°è…¿/è…¹éƒ¨å„2åˆ†é’Ÿï¼ˆæ¯ç»„30ç§’ï¼‰ï¼Œç¼“è§£ä¹³é…¸å †ç§¯</p>
                            <p>â€¢ ç¡çœ è¦æ±‚ï¼šä¿è¯7-8å°æ—¶ç¡çœ ï¼Œå¤œé—´æ˜¯è„‚è‚ªåˆ†è§£å…³é”®æ—¶æ®µ</p>
                            <p>â€¢ åŠ¨ä½œè§„èŒƒï¼šè·³ç»³æ—¶å‰è„šæŒå‘åŠ›ã€è†ç›–å¾®å±ˆï¼Œé¿å…è„šè·Ÿè½åœ°æŸä¼¤å…³èŠ‚</p>
                        </div>
                    </div>
                </div>
                
                <!-- å¢è‚Œç›®æ ‡å»ºè®® -->
                <div class="daily-advice-container">
                    <div class="advice-header" onclick="toggleAdvice('muscle-gain')">
                        å¢è‚Œç›®æ ‡é€‚é…å»ºè®® <span class="icon">â–¶</span>
                    </div>
                    <div class="advice-content" id="muscle-gain-content">
                        <div class="advice-section">
                            <!-- æ™ºèƒ½åˆ†ææ¨¡å— -->
                            <div class="smart-analysis">
                                <p><span class="score-label">ã€è¿åŠ¨æ­é…è¯„åˆ†ã€‘</span><span class="score-number">8/10</span></p>
                                <p>å½“æ—¥è¿åŠ¨ä¸ºã€Œè·³ç»³ï¼ˆæœ‰æ°§ï¼‰+ è…¹éƒ¨è®­ç»ƒï¼ˆæ— æ°§ï¼‰ã€ï¼Œæœ‰æ°§:æ— æ°§æ—¶é•¿æ¯”=1:1ï¼Œ<strong>è¯¥é…æ¯”å¥‘åˆå¢è‚ŒæœŸâ€œè€åŠ›+åŠ›é‡â€éœ€æ±‚</strong>ï¼Œ<em class="gray-text">æ‰£åˆ†é¡¹ä¸ºéƒ¨ä½è¦†ç›–å•ä¸€ï¼ˆä»…æ ¸å¿ƒï¼‰</em>ã€‚</p>
                                
                                <p><span class="score-label">ã€æ—¶é•¿åˆç†æ€§ã€‘</span><span class="score-number">9/10</span></p>
                                <p>å•ç±»è¿åŠ¨æ—¶é•¿å‡ä¸º<span class="data-highlight">30åˆ†é’Ÿ</span>ï¼Œå¤„äº<strong>â€œæœ‰æ°§æœ‰æ•ˆåŒºé—´ï¼ˆ20-45åˆ†é’Ÿï¼‰+ æ— æ°§æœ‰æ•ˆåŒºé—´ï¼ˆ20-30åˆ†é’Ÿï¼‰â€</strong>ï¼Œ<em class="gray-text">æ— æ—¶é•¿è¿‡çŸ­/è¿‡é•¿é—®é¢˜</em>ã€‚</p>
                            </div>
                            
                            <h4 class="section-title">1. è¿åŠ¨å¼ºåº¦è°ƒæ•´</h4>
                            <p>â€¢ å½“æ—¥è¿åŠ¨æ€»æ¶ˆè€—ï¼š<span class="data-highlight"><span id="muscle-gain-total-calorie">0</span>å¤§å¡</span> <span class="related-note">ï¼ˆç»“åˆã€æ—¶é•¿åˆç†æ€§ã€‘ï¼‰</span>ï¼Œè¯¥æ¶ˆè€—å¤„äºä¸­ç­‰åä¸Šæ°´å¹³</p>
                            <p>â€¢ æ¬¡æ—¥è®­ç»ƒå®‰æ’ï¼š<strong>è…¿éƒ¨è®­ç»ƒï¼ˆæ·±è¹²4ç»„Ã—8æ¬¡+ç®­æ­¥è¹²3ç»„Ã—12æ¬¡/è…¿ï¼‰+15åˆ†é’Ÿæ¤­åœ†æœºä½å¼ºåº¦æœ‰æ°§</strong>ï¼Œé¿å…å½±å“è‚Œè‚‰æ¢å¤</p>
                            <p>â€¢ ç»„é—´ä¼‘æ¯ï¼šä»<span class="data-highlight">60ç§’</span>å»¶é•¿è‡³<span class="data-highlight">90ç§’</span>ï¼ŒåŠ¨ä½œèŠ‚å¥ä¿æŒ<strong>â€œ2ç§’å‘åŠ›+3ç§’ç¦»å¿ƒâ€</strong>ï¼Œå‡å°‘è‚Œçº¤ç»´äºŒæ¬¡æŸä¼¤</p>
                        </div>
                        <div class="advice-section">
                            <h4>2. é¥®é£Ÿç²¾å‡†æ­é…</h4>
                            <p>â€¢ è®­ç»ƒå30åˆ†é’Ÿï¼š20gä¹³æ¸…è›‹ç™½+1æ ¹å¤§é¦™è•‰ï¼ˆ27gç¢³æ°´ï¼‰ï¼Œåˆ©ç”¨èƒ°å²›ç´ å³°å€¼ä¿ƒè¿›è‚Œè‚‰ä¿®å¤</p>
                            <p>â€¢ åŠ é¤é€‰æ‹©ï¼š100gå¸Œè…Šé…¸å¥¶ï¼ˆ10gè›‹ç™½ï¼‰+20gæä»ï¼ˆ10gå¥åº·è„‚è‚ªï¼‰ï¼Œç»´æŒå¤œé—´è‚Œè‚‰åˆæˆ</p>
                            <p>â€¢ çƒ­é‡ç›ˆä½™ï¼šå½“å‰ç›ˆä½™<span id="muscle-gain-calorie-gap">0</span>å¤§å¡ï¼Œå»ºè®®ä¿æŒåœ¨300-500å¤§å¡ï¼Œé¿å…è„‚è‚ªå †ç§¯</p>
                        </div>
                        <div class="advice-section">
                            <h4>3. æ¢å¤ä¸æŠ€å·§</h4>
                            <p>â€¢ é™æ€æ‹‰ä¼¸ï¼šèƒ¸éƒ¨/èƒŒéƒ¨å„æ‹‰ä¼¸30ç§’Ã—2ç»„ï¼Œæ”¹å–„è‚Œè‚‰æŸ”éŸ§æ€§</p>
                            <p>â€¢ è¥å…»è¡¥å……ï¼šæ¯æ—¥è¡¥å……1000mgç»´ç”Ÿç´ Cï¼ˆ1ä¸ªæ©™å­+100gçŒ•çŒ´æ¡ƒï¼‰ï¼Œç¼“è§£è®­ç»ƒç‚ç—‡</p>
                            <p>â€¢ åŠ¨ä½œè§„èŒƒï¼šæ·±è¹²æ—¶è†ç›–ä¸è„šå°–åŒå‘ã€ä¸è¶…è¿‡è„šå°–ï¼Œé¿å…è†å…³èŠ‚å‹åŠ›è¿‡å¤§</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <div class="nav">
        <button class="nav-btn" data-page="index">
            <i>ğŸ‘¤</i>
            <span>ä¸ªäºº</span>
        </button>
        <button class="nav-btn" data-page="diet">
            <i>ğŸ½ï¸</i>
            <span>é¥®é£Ÿ</span>
        </button>
        <button class="nav-btn" data-page="exercise">
            <i>ğŸƒ</i>
            <span>è¿åŠ¨</span>
        </button>
        <button class="nav-btn active" data-page="advice">
            <i>ğŸ’¡</i>
            <span>å»ºè®®</span>
        </button>
    </div>
    
    <script src="js/common.js"></script>
    <script src="js/food-db.js"></script>
    <script>
        // æ•°æ®è¯»å–å‡½æ•°
        function getDataFromLocalStorage() {
            // ä»localStorageè¯»å–TDEE
            const tdee = parseFloat(localStorage.getItem('userTDEE')) || 0.0;
            
            // ä»localStorageè¯»å–ä»Šæ—¥æ‘„å…¥
            const todayIntake = parseFloat(localStorage.getItem('todayDietIntake')) || 0.0;
            
            // ä»localStorageè¯»å–é¥®é£Ÿè®°å½•
            const today = new Date().toISOString().split('T')[0];
            const dietRecord = JSON.parse(localStorage.getItem(`diet_${today}`)) || { foods: [] };
            const foodRecords = dietRecord.foods;
            
            // ä»localStorageè¯»å–å½“æ—¥è¿åŠ¨æ•°æ®
            const exerciseRecord = JSON.parse(localStorage.getItem(`exercise_${today}`)) || { exercises: [] };
            const todayExercises = exerciseRecord.exercises;
            
            // è·å–ç”¨æˆ·ç›®æ ‡
            const userInfo = JSON.parse(localStorage.getItem('user_info')) || { goal: 'weight_loss' };
            const userGoal = userInfo.goal;
            
            return {
                tdee: tdee,
                todayIntake: todayIntake,
                foodRecords: foodRecords,
                todayExercises: todayExercises,
                userGoal: userGoal
            };
        }
        
        // è®¡ç®—çƒ­é‡ç¼ºå£å’Œä¸‰å¤§è¥å…»ç´ 
        function calculateNutritionData() {
            const data = getDataFromLocalStorage();
            
            // è®¡ç®—çƒ­é‡ç¼ºå£
            const calorieDeficit = data.tdee - data.todayIntake;
            
            // è®¡ç®—ä¸‰å¤§è¥å…»ç´ 
            let protein = 0.0;
            let carbs = 0.0;
            let fat = 0.0;
            
            data.foodRecords.forEach(foodItem => {
                // æŸ¥æ‰¾é£Ÿç‰©æ•°æ®åº“ä¸­çš„è¥å…»ä¿¡æ¯
                const foodInfo = window.FOOD_DB.find(food => food.name === foodItem.name);
                if (foodInfo) {
                    // å‡è®¾foodItem.quantityæ˜¯é£Ÿç”¨é‡ï¼ˆå…‹ï¼‰ï¼ŒfoodInfoçš„è¥å…»ä¿¡æ¯æ˜¯æ¯100å…‹çš„å«é‡
                    const quantity = foodItem.quantity || 100;
                    const ratio = quantity / 100;
                    
                    protein += foodInfo.nutrients.protein * ratio;
                    carbs += foodInfo.nutrients.carb * ratio;
                    fat += foodInfo.nutrients.fat * ratio;
                }
            });
            
            // è®¡ç®—ä¸‰å¤§è¥å…»ç´ ä¾›èƒ½å’Œå æ¯”
            const proteinCalories = protein * 4;
            const carbsCalories = carbs * 4;
            const fatCalories = fat * 9;
            const totalCalories = data.todayIntake;
            
            let proteinRatio = 0.0;
            let carbsRatio = 0.0;
            let fatRatio = 0.0;
            
            if (totalCalories > 0) {
                proteinRatio = (proteinCalories / totalCalories) * 100;
                carbsRatio = (carbsCalories / totalCalories) * 100;
                fatRatio = (fatCalories / totalCalories) * 100;
            }
            
            return {
                tdee: data.tdee,
                todayIntake: data.todayIntake,
                calorieDeficit: calorieDeficit,
                protein: protein,
                carbs: carbs,
                fat: fat,
                proteinRatio: proteinRatio,
                carbsRatio: carbsRatio,
                fatRatio: fatRatio,
                userGoal: data.userGoal,
                todayExercises: data.todayExercises
            };
        }
        
        // ç”Ÿæˆé¥®é£Ÿå»ºè®®
        function generateDietAdvice(nutritionData) {
            // è·å–ç”¨æˆ·ä½“é‡æ•°æ®ï¼ˆæ— æ•°æ®æ—¶ç”¨70kgå…œåº•ï¼‰
            const userInfo = JSON.parse(localStorage.getItem('user_info')) || { weight: 70 };
            const userWeight = parseFloat(userInfo.weight) || 70;
            
            // è®¡ç®—å»ºè®®æ‘„å…¥é‡
            const suggestedProtein = (userWeight * 1.4).toFixed(1); // è›‹ç™½è´¨å»ºè®®ï¼šä½“é‡kgÃ—1.2-1.6gï¼Œå–ä¸­é—´å€¼1.4
            const suggestedCarbs = (userWeight * 5).toFixed(1); // ç¢³æ°´å»ºè®®ï¼šä½“é‡kgÃ—4-6gï¼Œå–ä¸­é—´å€¼5
            const suggestedFat = (userWeight * 1.0).toFixed(1); // è„‚è‚ªå»ºè®®ï¼šä½“é‡kgÃ—0.8-1.2gï¼Œå–ä¸­é—´å€¼1.0
            const suggestedCalories = Math.max(nutritionData.tdee * 0.8, nutritionData.tdee - 500); // å»ºè®®æ‘„å…¥çƒ­é‡ï¼šä¸ä½äºTDEEçš„80%æˆ–ç¼ºå£ä¸è¶…è¿‡500å¤§å¡
            
            let advice = [];
            
            // æ ¹æ®çƒ­é‡ç¼ºå£ç”Ÿæˆå»ºè®®
            if (nutritionData.calorieDeficit > 2000) {
                const deficit = nutritionData.calorieDeficit.toFixed(1);
                advice.push({
                    title: 'âš ï¸ çƒ­é‡ç¼ºå£è¿‡å¤§',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.todayIntake.toFixed(1)}</span> å¤§å¡ï¼Œå»ºè®®è‡³å°‘æ‘„å…¥ <span class="data-value">${Math.round(suggestedCalories)}</span> å¤§å¡`,
                    recommendation: `éœ€è¡¥å……çº¦ <span class="data-value">${deficit}</span> å¤§å¡ï¼Œæ¨èæ‘„å…¥ <span class="food-name">150g ç³™ç±³é¥­</span>ï¼ˆæ¯100gå«77gç¢³æ°´ï¼‰<span class="food-nutrition">ï¼ˆå¯æä¾›çº¦116gç¢³æ°´ï¼‰</span> + <span class="food-name">120gé¸¡èƒ¸è‚‰</span>ï¼ˆæ¯100gå«20gè›‹ç™½ï¼‰<span class="food-nutrition">ï¼ˆå¯æä¾›çº¦24gè›‹ç™½ï¼‰</span>`
                });
            } else if (nutritionData.calorieDeficit > 1000) {
                const deficit = nutritionData.calorieDeficit.toFixed(1);
                advice.push({
                    title: 'çƒ­é‡ç¼ºå£è¾ƒå¤§',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.todayIntake.toFixed(1)}</span> å¤§å¡ï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${Math.round(suggestedCalories)}</span> å¤§å¡`,
                    recommendation: `éœ€è¡¥å……çº¦ <span class="data-value">${deficit}</span> å¤§å¡ï¼Œå»ºè®®é€‚å½“å¢åŠ é¥®é£Ÿæ‘„å…¥ï¼Œé¿å…ä»£è°¢ä¸‹é™`
                });
            } else if (nutritionData.calorieDeficit < 0) {
                const surplus = Math.abs(nutritionData.calorieDeficit).toFixed(1);
                advice.push({
                    title: 'âš ï¸ å½“å‰çƒ­é‡ç›ˆä½™',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.todayIntake.toFixed(1)}</span> å¤§å¡ï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${Math.round(suggestedCalories)}</span> å¤§å¡`,
                    recommendation: `è¶…å‡º <span class="data-value">${surplus}</span> å¤§å¡ï¼Œå»ºè®®å‡å°‘é«˜çƒ­é‡é£Ÿç‰©æ‘„å…¥æˆ–å¢åŠ è¿åŠ¨æ¶ˆè€—`
                });
            } else {
                const deficit = nutritionData.calorieDeficit.toFixed(1);
                advice.push({
                    title: 'çƒ­é‡æ‘„å…¥åˆç†',
                    content: `å½“å‰çƒ­é‡ç¼ºå£ <span class="data-value">${deficit}</span> å¤§å¡ï¼ˆå½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.todayIntake.toFixed(1)}</span> å¤§å¡ï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${Math.round(suggestedCalories)}</span> å¤§å¡ï¼‰`,
                    recommendation: 'å¤„äºåˆç†èŒƒå›´ï¼Œç»§ç»­ä¿æŒï¼'
                });
            }
            
            // æ ¹æ®è›‹ç™½è´¨æ‘„å…¥ç”Ÿæˆå»ºè®®
            if (nutritionData.protein < parseFloat(suggestedProtein) * 0.8) {
                const needToAdd = (parseFloat(suggestedProtein) - nutritionData.protein).toFixed(1);
                advice.push({
                    title: 'è›‹ç™½è´¨æ‘„å…¥ä¸è¶³',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.protein.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedProtein}</span> gï¼Œéœ€è¡¥å…… <span class="data-value need-to-add">${needToAdd}</span> g`,
                    recommendation: `æ¨èå¢åŠ  <span class="food-name">150g é¸¡èƒ¸è‚‰</span>ï¼ˆæ¯100gå«20gè›‹ç™½ï¼‰<span class="food-nutrition">ï¼ˆå¯è¡¥å……çº¦30gè›‹ç™½ï¼‰</span> + <span class="food-name">2ä¸ªé¸¡è›‹</span>ï¼ˆçº¦12.6gè›‹ç™½ï¼‰<span class="food-nutrition">ï¼ˆå¯è¡¥å……çº¦12.6gè›‹ç™½ï¼‰</span>`
                });
            } else if (nutritionData.protein > parseFloat(suggestedProtein) * 1.2) {
                const needToReduce = (nutritionData.protein - parseFloat(suggestedProtein)).toFixed(1);
                advice.push({
                    title: 'è›‹ç™½è´¨æ‘„å…¥è¿‡å¤š',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.protein.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedProtein}</span> gï¼Œéœ€å‡å°‘ <span class="data-value need-to-reduce">${needToReduce}</span> g`,
                    recommendation: 'å»ºè®®é€‚å½“å‡å°‘é«˜è›‹ç™½é£Ÿç‰©æ‘„å…¥ï¼Œå¢åŠ ç¢³æ°´åŒ–åˆç‰©æ¯”ä¾‹'
                });
            } else {
                advice.push({
                    title: 'è›‹ç™½è´¨æ‘„å…¥åˆç†',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.protein.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedProtein}</span> g`,
                    recommendation: 'ç»§ç»­ä¿æŒï¼'
                });
            }
            
            // æ ¹æ®ç¢³æ°´åŒ–åˆç‰©æ‘„å…¥ç”Ÿæˆå»ºè®®
            if (nutritionData.carbs < parseFloat(suggestedCarbs) * 0.8) {
                const needToAdd = (parseFloat(suggestedCarbs) - nutritionData.carbs).toFixed(1);
                advice.push({
                    title: 'ç¢³æ°´åŒ–åˆç‰©æ‘„å…¥ä¸è¶³',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.carbs.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedCarbs}</span> gï¼Œéœ€è¡¥å…… <span class="data-value need-to-add">${needToAdd}</span> g`,
                    recommendation: `æ¨èå¢åŠ  <span class="food-name">150g ç³™ç±³é¥­</span>ï¼ˆæ¯100gå«77gç¢³æ°´ï¼‰<span class="food-nutrition">ï¼ˆå¯è¡¥å……çº¦116gç¢³æ°´ï¼‰</span> æˆ– <span class="food-name">200g ç‰ç±³</span>ï¼ˆæ¯100gå«22gç¢³æ°´ï¼‰<span class="food-nutrition">ï¼ˆå¯è¡¥å……çº¦44gç¢³æ°´ï¼‰</span>`
                });
            } else if (nutritionData.carbs > parseFloat(suggestedCarbs) * 1.2) {
                const needToReduce = (nutritionData.carbs - parseFloat(suggestedCarbs)).toFixed(1);
                advice.push({
                    title: 'ç¢³æ°´åŒ–åˆç‰©æ‘„å…¥è¿‡å¤š',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.carbs.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedCarbs}</span> gï¼Œéœ€å‡å°‘ <span class="data-value need-to-reduce">${needToReduce}</span> g`,
                    recommendation: 'å»ºè®®é€‚å½“å‡å°‘ä¸»é£Ÿæ‘„å…¥ï¼Œå¢åŠ è›‹ç™½è´¨å’Œå¥åº·è„‚è‚ªæ¯”ä¾‹'
                });
            } else {
                advice.push({
                    title: 'ç¢³æ°´åŒ–åˆç‰©æ‘„å…¥åˆç†',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.carbs.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedCarbs}</span> g`,
                    recommendation: 'ç»§ç»­ä¿æŒï¼'
                });
            }
            
            // æ ¹æ®è„‚è‚ªæ‘„å…¥ç”Ÿæˆå»ºè®®
            if (nutritionData.fat < parseFloat(suggestedFat) * 0.8) {
                const needToAdd = (parseFloat(suggestedFat) - nutritionData.fat).toFixed(1);
                advice.push({
                    title: 'è„‚è‚ªæ‘„å…¥ä¸è¶³',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.fat.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedFat}</span> gï¼Œéœ€è¡¥å…… <span class="data-value need-to-add">${needToAdd}</span> g`,
                    recommendation: `æ¨èå¢åŠ  <span class="food-name">15g åšæœ</span>ï¼ˆæ¯100gå«50gè„‚è‚ªï¼‰<span class="food-nutrition">ï¼ˆå¯è¡¥å……çº¦7.5gè„‚è‚ªï¼‰</span> æˆ– <span class="food-name">10g æ©„æ¦„æ²¹</span>ï¼ˆæ¯100gå«100gè„‚è‚ªï¼‰<span class="food-nutrition">ï¼ˆå¯è¡¥å……çº¦10gè„‚è‚ªï¼‰</span>`
                });
            } else if (nutritionData.fat > parseFloat(suggestedFat) * 1.2) {
                const needToReduce = (nutritionData.fat - parseFloat(suggestedFat)).toFixed(1);
                advice.push({
                    title: 'è„‚è‚ªæ‘„å…¥è¿‡å¤š',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.fat.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedFat}</span> gï¼Œéœ€å‡å°‘ <span class="data-value need-to-reduce">${needToReduce}</span> g`,
                    recommendation: 'å»ºè®®å‡å°‘æ²¹ç‚¸é£Ÿç‰©å’Œé«˜è„‚è‚ªè‚‰ç±»æ‘„å…¥ï¼Œé€‰æ‹©å¥åº·è„‚è‚ªæ¥æº'
                });
            } else {
                advice.push({
                    title: 'è„‚è‚ªæ‘„å…¥åˆç†',
                    content: `å½“å‰æ‘„å…¥ <span class="data-value">${nutritionData.fat.toFixed(1)}</span> gï¼Œå»ºè®®æ‘„å…¥ <span class="data-value">${suggestedFat}</span> g`,
                    recommendation: 'ç»§ç»­ä¿æŒï¼'
                });
            }
            
            return advice;
        }
        
        // ç”Ÿæˆè¿åŠ¨å»ºè®®

        
        // ç”Ÿæˆå½“æ—¥è¿åŠ¨é€‚é…å»ºè®®
        function generateTodayExerciseAdvice(todayExercises, userGoal) {
            if (todayExercises.length === 0) {
                return 'æš‚æ— å½“æ—¥è¿åŠ¨æ•°æ®ï¼Œå»ºè®®æ ¹æ®åŸºç¡€æ–¹æ¡ˆè¿›è¡Œé”»ç‚¼';
            }
            
            // è®¡ç®—æœ‰æ°§å’Œæ— æ°§è¿åŠ¨çš„æ€»æ—¶é•¿
            let aerobicDuration = 0;
            let anaerobicDuration = 0;
            
            todayExercises.forEach(exercise => {
                // ç®€å•åˆ¤æ–­è¿åŠ¨ç±»å‹
                const isAerobic = ['è·‘æ­¥', 'è·³ç»³', 'æ¸¸æ³³', 'éª‘è‡ªè¡Œè½¦', 'æ•£æ­¥', 'æœ‰æ°§èˆè¹ˆ', 'æ¤­åœ†æœº', 'çˆ¬æ¥¼æ¢¯'].includes(exercise.name);
                const duration = exercise.duration || 0;
                
                if (isAerobic) {
                    aerobicDuration += duration;
                } else {
                    anaerobicDuration += duration;
                }
            });
            
            // æ ¹æ®è¿åŠ¨ç±»å‹å æ¯”å’Œç”¨æˆ·ç›®æ ‡ç”Ÿæˆå»ºè®®
            if (aerobicDuration > anaerobicDuration) {
                // æœ‰æ°§å æ¯”é«˜
                if (userGoal === 'weight_loss') {
                    return 'ä»Šæ—¥æœ‰æ°§è¿åŠ¨å æ¯”è¾ƒé«˜ï¼Œå»ºè®®å¢åŠ 5åˆ†é’Ÿé«˜å¼ºåº¦é—´æ­‡è®­ç»ƒï¼Œæå‡ç‡ƒè„‚æ•ˆæœï¼›è¿åŠ¨åè¡¥å……é€‚é‡è›‹ç™½è´¨ï¼Œä¿ƒè¿›è‚Œè‚‰ä¿®å¤ã€‚';
                } else {
                    return 'ä»Šæ—¥æœ‰æ°§è¿åŠ¨å æ¯”è¾ƒé«˜ï¼Œå»ºè®®é€‚å½“å‡å°‘æœ‰æ°§æ—¶é•¿ï¼Œå¢åŠ æ— æ°§è®­ç»ƒé‡é‡ï¼Œæ›´æœ‰åˆ©äºè‚Œè‚‰ç”Ÿé•¿ï¼›è®­ç»ƒå30åˆ†é’Ÿå†…è¡¥å……è›‹ç™½è´¨å’Œç¢³æ°´åŒ–åˆç‰©ã€‚';
                }
            } else if (anaerobicDuration > aerobicDuration) {
                // æ— æ°§å æ¯”é«˜
                if (userGoal === 'weight_loss') {
                    return 'ä»Šæ—¥æ— æ°§è¿åŠ¨å æ¯”è¾ƒé«˜ï¼Œå»ºè®®è®­ç»ƒåæ§åˆ¶é¥®é£Ÿçƒ­é‡ï¼Œä¿æŒçƒ­é‡ç¼ºå£ï¼›å¯ä»¥å¢åŠ 10åˆ†é’Ÿä½å¼ºåº¦æœ‰æ°§è¿åŠ¨ï¼Œå¸®åŠ©æ¶ˆè€—æ›´å¤šè„‚è‚ªã€‚';
                } else {
                    return 'ä»Šæ—¥æ— æ°§è¿åŠ¨å æ¯”è¾ƒé«˜ï¼Œå»ºè®®è®­ç»ƒå30åˆ†é’Ÿå†…è¡¥å……20-30gè›‹ç™½è´¨å’Œé€‚é‡ç¢³æ°´åŒ–åˆç‰©ï¼Œä¿ƒè¿›è‚Œè‚‰æ¢å¤å’Œç”Ÿé•¿ï¼›æ³¨æ„ä¿æŒå……è¶³ç¡çœ ã€‚';
                }
            } else {
                // æœ‰æ°§å’Œæ— æ°§å‡è¡¡
                return 'ä»Šæ—¥è¿åŠ¨æ­é…å‡è¡¡ï¼Œå»ºè®®æ ¹æ®èº«ä½“æ„Ÿå—è°ƒæ•´å¼ºåº¦ï¼›è®­ç»ƒåæ³¨æ„è¡¥å……è¥å…»å’Œä¼‘æ¯ï¼Œä¿ƒè¿›èº«ä½“æ¢å¤ã€‚';
            }
        }
        
        // æ¸²æŸ“é¥®é£Ÿå»ºè®®
        function renderDietAdvice() {
            const nutritionData = calculateNutritionData();
            
            // æ›´æ–°æ ¸å¿ƒæ•°æ®æ˜¾ç¤º
            document.getElementById('tdeeValue').textContent = nutritionData.tdee.toFixed(1);
            document.getElementById('todayIntakeValue').textContent = nutritionData.todayIntake.toFixed(1);
            
            // æ›´æ–°çƒ­é‡ç¼ºå£å¹¶æ·»åŠ è­¦ç¤ºè‰²
            const deficitElement = document.getElementById('calorieDeficitValue');
            deficitElement.textContent = nutritionData.calorieDeficit.toFixed(1);
            
            // æ›´æ–°ä¸‰å¤§è¥å…»ç´ æ˜¾ç¤º
            document.getElementById('proteinValue').textContent = nutritionData.protein.toFixed(1);
            document.getElementById('carbValue').textContent = nutritionData.carbs.toFixed(1);
            document.getElementById('fatValue').textContent = nutritionData.fat.toFixed(1);
            
            // ç”Ÿæˆå¹¶æ›´æ–°é‡åŒ–è°ƒæ•´å»ºè®®
            const dietAdvice = generateDietAdvice(nutritionData);
            const adviceList = document.getElementById('adjustmentAdviceList');
            adviceList.innerHTML = '';
            
            if (dietAdvice.length > 0) {
                dietAdvice.forEach(advice => {
                    const adviceItem = document.createElement('div');
                    adviceItem.className = 'advice-item';
                    
                    // æ ‡é¢˜æ 
                    const adviceTitle = document.createElement('div');
                    adviceTitle.className = 'advice-title';
                    adviceTitle.innerHTML = advice.title + '<span class="icon">â–¶ï¸</span>';
                    adviceTitle.onclick = function() { toggleAdvice(this); };
                    
                    // å†…å®¹åŒº
                    const adviceContent = document.createElement('div');
                    adviceContent.className = 'advice-content';
                    adviceContent.innerHTML = advice.content;
                    
                    if (advice.recommendation) {
                        const adviceRecommendation = document.createElement('div');
                        adviceRecommendation.className = 'advice-recommendation';
                        adviceRecommendation.innerHTML = advice.recommendation;
                        adviceContent.appendChild(adviceRecommendation);
                    }
                    
                    adviceItem.appendChild(adviceTitle);
                    adviceItem.appendChild(adviceContent);
                    adviceList.appendChild(adviceItem);
                });
            } else {
                const adviceItem = document.createElement('div');
                adviceItem.className = 'advice-item';
                
                const adviceTitle = document.createElement('div');
                adviceTitle.className = 'advice-title';
                adviceTitle.innerHTML = 'æš‚æ— è°ƒæ•´å»ºè®® <span class="icon">â–¶ï¸</span>';
                adviceTitle.onclick = function() { toggleAdvice(this); };
                
                adviceItem.appendChild(adviceTitle);
                adviceList.appendChild(adviceItem);
            }
            
            // å±•å¼€/æŠ˜å å‡½æ•°ï¼ˆæ— è‡ªåŠ¨æ”¶å›é€»è¾‘ï¼‰
            function toggleAdvice(el) {
                // ä»…åˆ‡æ¢å½“å‰é¡¹çš„çŠ¶æ€ï¼Œæ— ä»»ä½•å…¨å±€å½±å“
                el.classList.toggle('active');
                const content = el.nextElementSibling;
                content.classList.toggle('show');
            }
        }
        
        // æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®æ¥å£
        const userDailyData = {
          goalType: "å‡è„‚", // ç”¨æˆ·å½“å‰ç›®æ ‡
          todaySports: [ // å½“æ—¥è¿åŠ¨è®°å½•
            { name: "è·³ç»³", duration: 30, calorie: 300 },
            { name: "è…¹éƒ¨è®­ç»ƒ", duration: 30, calorie: 120 }
          ],
          todayDiet: { // å½“æ—¥é¥®é£Ÿæ•°æ®
            totalCalorie: 1500, // æ€»æ‘„å…¥çƒ­é‡
            protein: 60, // è›‹ç™½è´¨ï¼ˆgï¼‰
            carb: 180, // ç¢³æ°´ï¼ˆgï¼‰
            fat: 40 // è„‚è‚ªï¼ˆgï¼‰
          },
          calorieGap: 500 // çƒ­é‡ç¼ºå£ï¼ˆå‡è„‚ä¸ºæ­£ï¼Œå¢è‚Œä¸ºè´Ÿï¼‰
        };

        // æ¸²æŸ“è¿åŠ¨å»ºè®®
        function renderExerciseAdvice() {
            const nutritionData = calculateNutritionData();
            
            // è®¡ç®—æ€»è¿åŠ¨æ¶ˆè€—
            const totalCalorie = userDailyData.todaySports.reduce((a, b) => a + b.calorie, 0);
            
            // æ›´æ–°å‡è„‚å»ºè®®æ•°æ®
            document.getElementById('fat-loss-total-calorie').textContent = totalCalorie;
            document.getElementById('fat-loss-calorie-gap').textContent = userDailyData.calorieGap;
            
            // æ›´æ–°å¢è‚Œå»ºè®®æ•°æ®
            document.getElementById('muscle-gain-total-calorie').textContent = totalCalorie;
            document.getElementById('muscle-gain-calorie-gap').textContent = Math.abs(userDailyData.calorieGap);
            
            // æ ¹æ®ç›®æ ‡ç±»å‹æ§åˆ¶æ˜¾ç¤º
            const goalType = userDailyData.goalType;
            if (goalType === "å‡è„‚") {
              // é»˜è®¤å±•å¼€å‡è„‚å»ºè®®
              document.querySelector('[onclick="toggleAdvice(\'fat-loss\')"]').classList.add('active');
            } else if (goalType === "å¢è‚Œ") {
              // é»˜è®¤å±•å¼€å¢è‚Œå»ºè®®
              document.querySelector('[onclick="toggleAdvice(\'muscle-gain\')"]').classList.add('active');
            }
        }
        
        // å…¨é‡æ•°æ®åˆ·æ–°å‡½æ•°
        function refreshAllData() {
            try {
                renderDietAdvice();
                renderExerciseAdvice();
            } catch (error) {
                console.error('æ•°æ®åˆ·æ–°å¤±è´¥:', error);
                // ä½¿ç”¨å…œåº•å€¼ç¡®ä¿é¡µé¢ä¸å´©æºƒ
                document.getElementById('tdeeValue').textContent = '0.0';
                document.getElementById('todayIntakeValue').textContent = '0.0';
                document.getElementById('calorieDeficitValue').textContent = '0.0';
                document.getElementById('proteinValue').textContent = '0.0';
                document.getElementById('carbValue').textContent = '0.0';
                document.getElementById('fatValue').textContent = '0.0';
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–æ¸²æŸ“
            refreshAllData();
            
            // å…¨å±€å±•å¼€/æŠ˜å å‡½æ•°ï¼Œç¡®ä¿è¿åŠ¨å»ºè®®åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
            window.toggleAdvice = function(id) {
                // å¤„ç†é‡åŒ–è°ƒæ•´å»ºè®®çš„å±•å¼€/æŠ˜å ï¼ˆç›´æ¥ä¼ å…¥DOMå…ƒç´ ï¼‰
                if (typeof id === 'object' && id instanceof Element) {
                    const el = id;
                    el.classList.toggle('active');
                    const content = el.nextElementSibling;
                    if (content) {
                        content.classList.toggle('show');
                    }
                } 
                // å¤„ç†å½“æ—¥è¿åŠ¨é€‚é…å»ºè®®çš„å±•å¼€/æŠ˜å ï¼ˆé€šè¿‡IDï¼‰
                else {
                    const header = document.querySelector(`[onclick="toggleAdvice('${id}')"]`);
                    if (header) {
                        header.classList.toggle('active');
                    }
                }
            };
            
            // ç‚¹å‡»åº•éƒ¨"å»ºè®®"æŒ‰é’®å¼ºåˆ¶åˆ·æ–°
            const adviceNavBtn = document.querySelector('.nav-btn[data-page="advice"]');
            adviceNavBtn.addEventListener('click', function() {
                refreshAllData();
                
                // æ˜¾ç¤ºåˆ·æ–°æç¤º
                const tempElement = document.createElement('div');
                tempElement.textContent = 'æ•°æ®å·²åˆ·æ–°';
                tempElement.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background-color: rgba(0, 0, 0, 0.7);
                    color: white;
                    padding: 10px 20px;
                    border-radius: 5px;
                    font-size: 14px;
                    z-index: 1000;
                `;
                document.body.appendChild(tempElement);
                
                // 2ç§’åç§»é™¤æç¤º
                setTimeout(() => {
                    document.body.removeChild(tempElement);
                }, 2000);
            });
            

        });
    </script>
</body>
</html>